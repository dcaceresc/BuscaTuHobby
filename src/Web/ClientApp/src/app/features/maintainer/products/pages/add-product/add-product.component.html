<div class="card mt-3">
  <div class="card-header bg-primary">Crear Producto</div>
  <div class="card-body">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="name" class="form-label">Nombre</label>
        <input
          type="text"
          class="form-control"
          id="name"
          formControlName="name"
          required
        />
      </div>

      <div class="mb-3">
        <label for="scaleId" class="form-label">Scales:</label>
        <ng-select
          id="scaleId"
          formControlName="scaleId"
          bindLabel="name"
          bindValue="id"
          [items]="scales()"
        >
        </ng-select>
      </div>

      <div class="mb-3">
        <label for="manufacturerId" class="form-label">Fabricante</label>
        <ng-select
          id="manufacturerId"
          formControlName="manufacturerId"
          bindLabel="name"
          bindValue="id"
          [items]="manufacturers()"
        >
        </ng-select>
      </div>

      <div class="mb-3">
        <label for="franchiseId" class="form-label">Franquicia</label>
        <ng-select
          id="franchiseId"
          formControlName="franchiseId"
          bindLabel="name"
          bindValue="id"
          [items]="franchises()"
          (change)="onFranchisesChange()"
        >
        </ng-select>
      </div>

      @if (productForm.get('franchiseId')!.value && series.length > 0) {
      <div class="mb-3">
        <label for="serieId" class="form-label">Serie</label>
        <ng-select
          id="serieId"
          formControlName="serieId"
          bindLabel="name"
          bindValue="id"
          [items]="series()"
        >
        </ng-select>
      </div>
      }

      <div class="mb-3">
        <label for="categories" class="form-label">Categorias</label>
        <ng-select
          id="categories"
          formControlName="categories"
          bindLabel="name"
          bindValue="id"
          [items]="categories()"
          groupBy="groupName"
          [multiple]="true"
          [searchFn]="searchCategories"
        >
        </ng-select>
      </div>

      <div class="form-check mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          id="hasBase"
          formControlName="hasBase"
        />
        <label class="form-check-label" for="hasBase">Tiene Base</label>
      </div>

      <div class="mb-3">
        <label for="size" class="form-label">Tama√±o</label>
        <input
          type="text"
          id="size"
          formControlName="size"
          class="form-control"
        />
      </div>

      <div class="mb-3">
        <label for="targetAge" class="form-label">Edad Recomendada</label>
        <input
          type="text"
          id="targetAge"
          formControlName="targetAge"
          class="form-control"
        />
      </div>

      <div class="mb-3">
        <label for="releaseDate" class="form-label">Fecha de Lanzamiento</label>
        <input
          type="date"
          class="form-control"
          id="releaseDate"
          formControlName="releaseDate"
          required
        />
      </div>

      <div class="mb-3">
        <label for="name" class="form-label">Descripcion</label>
        <textarea
          class="form-control"
          id="description"
          formControlName="description"
          required
        ></textarea>
      </div>

      <div class="d-flex justify-content-end">
        <button
          type="submit"
          class="btn bg-primary me-2"
          [disabled]="productForm.invalid"
        >
          Guardar
        </button>
        <button type="button" class="btn bg-secundary" (click)="onCancel()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
