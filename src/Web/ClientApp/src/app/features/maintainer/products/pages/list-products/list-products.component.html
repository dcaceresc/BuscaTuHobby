<h3 class="mt-3">Productos</h3>

<a class="btn bg-primary mb-2" [routerLink]="['/maintainer/products/create']"
  >Crear Producto</a
>

<div class="table-responsive">
  <table class="table table-stripped table-bordered">
    <thead class="bg-primary">
      <tr>
        <th>#</th>
        <th>Nombre</th>
        <th>Escala</th>
        <th>Fabricante</th>
        <th>Franquicia</th>
        <th>Serie</th>
        <th>Categorias</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @for (product of getPaginatedData(); track product; let i = $index) {
      <tr>
        <td>{{ (currentPage() - 1) * itemsPerPage + i + 1 }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.scaleName }}</td>
        <td>{{ product.manufacturerName }}</td>
        <td>{{ product.franchiseName }}</td>
        <td>{{ product.serieName }}</td>
        <td>
          @for (category of product.categories; track category) {
          <ul>
            <li>{{ category }}</li>
          </ul>
          }
        </td>
        <td>
          <a
            [routerLink]="['/maintainer/products/edit/', product.id]"
            class="btn bg-primary me-2"
          >
            <fa-icon [icon]="faEdit"></fa-icon> Editar
          </a>
          <a
            class="btn"
            [ngClass]="product.active ? 'bg-danger' : 'bg-success'"
            (click)="toggle(product.id!)"
          >
            <fa-icon [icon]="faPowerOff"></fa-icon>
            {{ product.active ? "Desactivar" : "Activar" }}
          </a>
        </td>
      </tr>
      }
    </tbody>
  </table>
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-end">
      <li class="page-item" [ngClass]="{ disabled: currentPage() === 1 }">
        <a class="page-link" (click)="setPage(currentPage() - 1)">Anterior</a>
      </li>
      @for (page of range(1); track page) {
      <li class="page-item" [ngClass]="{ active: currentPage() === page }">
        <a class="page-link" (click)="setPage(page)">{{ page }}</a>
      </li>
      }
      <li class="page-item" [ngClass]="{ disabled: currentPage() === nPage() }">
        <a class="page-link" (click)="setPage(currentPage() + 1)">Siguiente</a>
      </li>
    </ul>
  </nav>
</div>
